# 活动管理
配置每个促销活动的有效期、订购短信模板，同时可以实现活动拉新统计、自动上线下线功能。

## 1. 库表  
```
库表 tb_ordercenter_festival
```

## 2. 基本信息
活动的基本信息包括活动的名称，活动开始时间，结束时间，活动页面的标题，活动编码。活动编码在添加活动时自动生成。活动包括平价活动与促销活动，主要区别是订购成功的短信不一样，促销活动的订购成功短信中会说明会返话费，而平价活动没有。

## 3. 产品配置
一般一个活动关联一个产品，但是也有一个活动关联多个产品的情况，比如抖音聚合页面、二选一页面需要配置2个产品。getstyle接口会返回配置的产品信息。

## 4. 层级关系
活动有层级关系，优先使用促销活动，促销活动失效后，使用平价活动。打开时活动页面，页面调用getstyle接口校验活动与渠道，如果有促销活动，接口返回促销活动的配置信息，同时也返回一个url地址，页面自行决定是否跳转。

## 5. 活动上线
每个产品都有一个平价活动，没有促销活动的时候使用平价活动，比如：
9元10G今日头条国定定向流量包的10006、10007；
抖音定向流量权益包的10203、20009。

配置促销活动时，需要配置他的平价活动，当时间进入活动期间后，getstyle接口返回促销活动的配置。用户订购成功，发送促销活动配置的短信。配置促销活动链接时，也在tb_ordercenter_fes_chan表中插入对应的平价活动的fescod和channelid。可以将活动设置为全渠道，全渠道表示促销活动继承平价活动的全部渠道，这种适用于客户端的活动，比如10006。

在活动管理修改页面，修改活动的促销活动的平价活动时，tb_ordercenter_fes_chan 的记录也会跟这修改。
```
update tb_ordercenter_fes_chan 
   set fescod=#new_paritycode#
 where promocode=#promocode#
```

## 6. 活动下线
促销活动到期后，getstyle接口返回平价活动的信息和平价活动的配置，实时下线促销活动的短信。


## 7. 拉新统计
敬请期待！